script(src="#{widget_url}")
script.
  (function () {
    var widget = window.widget = new Auth0Lock('#{env.AUTH0_CLIENT_ID}', '#{env.AUTH0_DOMAIN}');
    function getBasicInfo () {
      return {
        path: window.location.pathname,
        url: window.location.toString(),
        title: document.title,
        referrer: document.referrer,
        category: 'Lock',
        label: 'docs'
      }
    }
    var options = {
      callbackURL: '#{uiURLLoginCallback}',
      dict: {
        signup: {
          footerText: 'By signing up, you agree to our <a href="/terms" target="_new">terms of service</a> and <a href="/privacy" target="_new">privacy policy</a>'
        }
      },
      icon: '//cdn.auth0.com/styleguide/latest/lib/logos/img/badge.png'
    };

    widget.on('signup ready', function() {
      if (!window.analytics) return;
      window.analytics.track('open:signup', getBasicInfo());
    });

    widget.on('signin ready', function() {
      if (!window.analytics) return;
      window.analytics.track('open:signin', getBasicInfo());
    });

    window.login = function () {
      if (window.analytics) {
        window.analytics.track('click:signin', getBasicInfo());
      }
      widget.hide(function() {
        widget.show(options);
      });
    };

    window.signup = function() {
      if (window.analytics) {
        window.analytics.track('click:signup', getBasicInfo());
      }
      widget.hide(function() {
        widget.showSignup(options);
      });
    }
  })()
